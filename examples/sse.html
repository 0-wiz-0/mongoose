<html>
  <head>
    <script type="text/javascript">
    window.onload = function() {
      var es = new EventSource("/api/sse");
      var div = document.getElementById('events');
      es.onmessage = function(ev) {
        var el = document.createElement('div');
        el.innerHTML = 'sse message: ' + ev.data;
        div.appendChild(el);
        // Keep only last 5 messages in the list
        while (div.childNodes.length > 5) div.removeChild(div.firstChild);
      };
    };
    </script>
  </head>
  <body>
    <h1>SSE pushes, done by separate threads at random times:</h1>
    <div id="events"></div>
  </body>
</html>